<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>weather</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="../../static/css/lth/weather.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>

<body>
  <header>
    <!-- Header content... -->
  </header>
  <main>
    <div class="section0">
      <div class="bar-back"></div>
    </div>
    <div class="section0">
      <div class="section00">
      </div>
    </div>
    <div class="mypage-container">
      <!-- My Page content... -->

      <!-- Seoul Weather -->
      <div class="weather-container">
        <h2>서울 날씨</h2>
        <div class="weather-icon"></div>
        <div class="weather-description"></div>
        <div class="current-temp"></div>
        <div class="humidity"></div>
        <div class="wind"></div>
        <div class="city"></div>
        <div class="cloud"></div>
        <div class="temp-min"></div>
        <div class="temp-max"></div>
      </div>
      <div style="background-color : rgb(242, 244, 247); padding : 40px;color : #eeeeee; height : 220px">
        <div style="float : left;">
          <div class="weather_icon"></div>
        </div><br>
        <div style="float : right; margin : -5px 0px 0px 60px; font-size : 11pt">
          <div class="temp_min"></div>
          <div class="temp_max"></div>
          <div class="humidity"></div>
          <div class="wind"></div>
          <div class="cloud"></div>
        </div>
        <div style="float : right; margin-top : -45px;">
          <div class="current_temp" style="font-size : 50pt"></div>
          <div class="weather_description" style="font-size : 20pt"></div>
          <div class="city" style="font-size : 13pt"></div>
        </div>
      </div>

      <!-- Busan Weather -->
      <div class="weather-container">
        <h2>부산 날씨</h2>
        <div class="g-weather-icon"></div>
        <div class="g-weather-description"></div>
        <div class="g-current-temp"></div>
        <div class="g-humidity"></div>
        <div class="g-wind"></div>
        <div class="g-city"></div>
        <div class="g-cloud"></div>
        <div class="g-temp-min"></div>
        <div class="g-temp-max"></div>
      </div>

      <div style="background-color : rgb(242, 244, 247); padding : 40px;color : #eeeeee; height : 220px">
        <div style="float : left;">
          <div class="weather_icon"></div>
        </div><br>
        <div style="float : right; margin : -5px 0px 0px 60px; font-size : 11pt">
          <div class="temp_min"></div>
          <div class="temp_max"></div>
          <div class="humidity"></div>
          <div class="wind"></div>
          <div class="cloud"></div>
        </div>
        <div style="float : right; margin-top : -45px;">
          <div class="current_temp" style="font-size : 50pt"></div>
          <div class="weather_description" style="font-size : 20pt"></div>
          <div class="city" style="font-size : 13pt"></div>
        </div>
      </div>

    </div>
  </main>
  <footer>
    <!-- Footer content... -->
  </footer>
  <script>

    var weatherIcon = {
      '01': 'fas fa-sun',
      '02': 'fas fa-cloud-sun',
      '03': 'fas fa-cloud',
      '04': 'fas fa-cloud-meatball',
      '09': 'fas fa-cloud-sun-rain',
      '10': 'fas fa-cloud-showers-heavy',
      '11': 'fas fa-poo-storm',
      '13': 'far fa-snowflake',
      '50': 'fas fa-smog'
    };

    // 서울 날씨 API
    var seoulApiURI = "http://api.openweathermap.org/data/2.5/weather?q=" + 'seoul' + "&appid=" +
      "5f88fbf670a339eb5f33bac2d8fd0f44";
    $.ajax({
      url: seoulApiURI,
      dataType: "json",
      type: "GET",
      async: false, // 변경된 부분
      success: function (resp) {

        var $Icon = (resp.weather[0].icon).substr(0, 2);
        var $weather_description = resp.weather[0].main;
        var $Temp = Math.floor(resp.main.temp - 273.15) + 'º';
        var $humidity = '습도&nbsp;&nbsp;&nbsp;&nbsp;' + resp.main.humidity + ' %';
        var $wind = '바람&nbsp;&nbsp;&nbsp;&nbsp;' + resp.wind.speed + ' m/s';
        var $city = '서울';
        var $cloud = '구름&nbsp;&nbsp;&nbsp;&nbsp;' + resp.clouds.all + "%";
        var $temp_min = '최저 온도&nbsp;&nbsp;&nbsp;&nbsp;' + Math.floor(resp.main.temp_min - 273.15) + 'º';
        var $temp_max = '최고 온도&nbsp;&nbsp;&nbsp;&nbsp;' + Math.floor(resp.main.temp_max - 273.15) + 'º';

        $('.weather_icon').append('<i class="' + weatherIcon[$Icon] + ' fa-5x" style="height : 150px; width : 150px;"></i>');
        $('.weather_description').prepend($weather_description);
        $('.current_temp').prepend($Temp);
        $('.humidity').prepend($humidity);
        $('.wind').prepend($wind);
        $('.city').append($city);
        $('.cloud').append($cloud);
        $('.temp_min').append($temp_min);
        $('.temp_max').append($temp_max);
      }
    })

    // 부산 날씨 API
    var busanApiURI = "http://api.openweathermap.org/data/2.5/weather?q=" + 'Busan' + "&appid=" +
      "5f88fbf670a339eb5f33bac2d8fd0f44";
    $.ajax({
      url: busanApiURI,
      dataType: "json",
      type: "GET",
      async: false, // 변경된 부분
      success: function (resp) {

        var $g_Icon = (resp.weather[0].icon).substr(0, 2);
        var $g_weather_description = resp.weather[0].main;
        var $g_Temp = Math.floor(resp.main.temp - 273.15) + 'º';
        var $g_humidity = '습도&nbsp;&nbsp;&nbsp;&nbsp;' + resp.main.humidity + ' %';
        var $g_wind = '바람&nbsp;&nbsp;&nbsp;&nbsp;' + resp.wind.speed + ' m/s';
        var $g_city = '부산';
        var $g_cloud = '구름&nbsp;&nbsp;&nbsp;&nbsp;' + resp.clouds.all + "%";
        var $g_temp_min = '최저 온도&nbsp;&nbsp;&nbsp;&nbsp;' + Math.floor(resp.main.temp_min - 273.15) + 'º';
        var $g_temp_max = '최고 온도&nbsp;&nbsp;&nbsp;&nbsp;' + Math.floor(resp.main.temp_max - 273.15) + 'º';

        $('.g_weather_icon').append('<i class="' + weatherIcon[$g_Icon] + ' fa-5x" style="height : 150px; width : 150px;"></i>');
        $('.g_weather_description').prepend($g_weather_description);
        $('.g_current_temp').prepend($g_Temp);
        $('.g_humidity').prepend($g_humidity);
        $('.g_wind').prepend($g_wind);
        $('.g_city').append($g_city);
        $('.g_cloud').append($g_cloud);
        $('.g_temp_min').append($g_temp_min);
        $('.g_temp_max').append($g_temp_max);
      }
    })
  </script>
</body>

</html>
